
FILE(GLOB SRCS *.cpp)
FILE(GLOB HDRS *.h)

ADD_LIBRARY(libft800emu
	${SRCS}
	${HDRS}
	)

target_link_libraries(libft800emu
	)

option(WITH_SDL "Build an SDL application." ON)

if (WITH_SDL)

  # SDL base package
  find_package (SDL)
  if (NOT SDL_FOUND)
    message (FATAL_ERROR "SDL not found!")
  endif (NOT SDL_FOUND)
  include_directories(
    ${SDL_INCLUDE_DIR}
    ${INCLUDE_DIRECTORIES}
    )
  target_link_libraries(libft800emu
    ${SDL_LIBRARY}
    ${TARGET_LINK_LIBRARIES}
    )

  SET(CMAKE_C_FLAGS "-DFT800EMU_SDL ${CMAKE_C_FLAGS}" CACHE STRING "" FORCE)
  SET(CMAKE_CXX_FLAGS "-DFT800EMU_SDL ${CMAKE_CXX_FLAGS}" CACHE STRING "" FORCE)

endif (WITH_SDL)

option (USE_SSE_41 "Use SSE 4.1 instructions" OFF)

if (USE_SSE_41)

  if(CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_GNUCXX)
    SET(CMAKE_C_FLAGS "-msse4.1 ${CMAKE_C_FLAGS}" CACHE STRING "" FORCE)
    SET(CMAKE_CXX_FLAGS "-msse4.1 ${CMAKE_CXX_FLAGS}" CACHE STRING "" FORCE)
  endif(CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_GNUCXX)

  SET(CMAKE_C_FLAGS "-DFT800EMU_SSE41 ${CMAKE_C_FLAGS}" CACHE STRING "" FORCE)
  SET(CMAKE_CXX_FLAGS "-DFT800EMU_SSE41 ${CMAKE_CXX_FLAGS}" CACHE STRING "" FORCE)

endif (USE_SSE_41)

SET(CMAKE_C_FLAGS "-DFT800EMU_CMAKE ${CMAKE_C_FLAGS}" CACHE STRING "" FORCE)
SET(CMAKE_CXX_FLAGS "-DFT800EMU_CMAKE ${CMAKE_CXX_FLAGS}" CACHE STRING "" FORCE)

SET(FT800_REFERENCE_DIR "./" CACHE STRING "Directory containing ROM")
add_definitions(-DFT800EMU_REFERENCE_DIR="${FT800_REFERENCE_DIR}")

